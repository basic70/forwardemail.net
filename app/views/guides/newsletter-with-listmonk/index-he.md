# Listmonk עם העברת דוא"ל למשלוח מאובטח של ניוזלטר {#listmonk-with-forward-email-for-secure-newsletter-delivery}

## תוכן עניינים

* [סקירה כללית](#overview)
* [למה Listmonk ו-Forward Email](#why-listmonk-and-forward-email)
* [דרישות קדם](#prerequisites)
* [הַתקָנָה](#installation)
  * [1. עדכן את השרת שלך](#1-update-your-server)
  * [2. התקנת תלויות](#2-install-dependencies)
  * [3. הורד את תצורת Listmonk](#3-download-listmonk-configuration)
  * [4. הגדרת חומת אש (UFW)](#4-configure-firewall-ufw)
  * [5. הגדרת גישת HTTPS](#5-configure-https-access)
  * [6. הפעל את Listmonk](#6-start-listmonk)
  * [7. הגדרת SMTP להעברת דוא"ל ב-Listmonk](#7-configure-forward-email-smtp-in-listmonk)
  * [8. הגדרת עיבוד יציאות יציאה](#8-configure-bounce-processing)
* [בּוֹחֵן](#testing)
  * [צור רשימת תפוצה](#create-a-mailing-list)
  * [הוסף מנויים](#add-subscribers)
  * [צור ושלח קמפיין](#create-and-send-a-campaign)
* [אימות](#verification)
* [הערות למפתחים](#developer-notes)
* [מַסְקָנָה](#conclusion)

## סקירה כללית של {#overview}

מדריך זה מספק למפתחים הוראות שלב אחר שלב להגדרת [ליסטמונק](https://listmonk.app/), מנהל רשימות תפוצה וניוזלטרים בקוד פתוח רב עוצמה, לשימוש ב-[העברת דוא"ל](https://forwardemail.net/) כספק ה-SMTP שלו. שילוב זה מאפשר לך לנהל את הקמפיינים שלך ביעילות תוך הבטחת מסירת דוא"ל מאובטחת, פרטית ואמינה.

* **Listmonk**: מטפל בניהול מנויים, ארגון רשימות, יצירת קמפיינים ומעקב אחר ביצועים.
* **העברת דוא"ל**: פועל כשרת SMTP מאובטח, ומטפל בשליחת דוא"ל בפועל עם תכונות אבטחה מובנות כמו SPF, DKIM, DMARC והצפנת TLS.

על ידי שילוב שני אלה, אתם שומרים על שליטה מלאה על הנתונים והתשתית שלכם תוך מינוף מערכת המסירה החזקה של Forward Email.

## למה להשתמש ב-Listmonk ולשלוח אימייל קדימה {#why-listmonk-and-forward-email}

* **קוד פתוח**: גם Listmonk וגם העקרונות שמאחורי Forward Email מדגישים שקיפות ושליטה. אתם מארחים את Listmonk בעצמכם, ובעלים את הנתונים שלכם.
* **ממוקד בפרטיות**: Forward Email בנוי עם פרטיות בליבתו, תוך צמצום שמירת נתונים והתמקדות בהעברה מאובטחת.
* **חסכונית**: Listmonk הוא חינמי, ו-Forward Email מציע רמות חינמיות נדיבות ותוכניות בתשלום במחירים נוחים, מה שהופך את זה לפתרון ידידותי לתקציב.
* **מדרגיות**: Listmonk הוא בעל ביצועים גבוהים, והתשתית של Forward Email מיועדת למשלוח אמין בקנה מידה גדול.
* **ידידותי למפתחים**: Listmonk מציע API חזק, ו-Forward Email מספק שילוב SMTP ו-webhooks פשוטים.

## דרישות קדם {#prerequisites}

לפני שתתחיל, ודא שיש לך את הדברים הבאים:

* שרת פרטי וירטואלי (VPS) המריץ הפצת לינוקס עדכנית (מומלץ אובונטו 20.04+) עם לפחות מעבד אחד ו-1GB RAM (מומלץ 2GB).
* זקוק לספק? בדוק את [רשימת VPS מומלצת](https://github.com/forwardemail/awesome-mail-server-providers).
* שם דומיין שבשליטתך (נדרשת גישת DNS).
* חשבון פעיל עם [העברת דוא"ל](https://forwardemail.net/).
* גישת Root או `sudo` לשרת ה-VPS שלך.
* היכרות בסיסית עם פעולות שורת פקודה בלינוקס.

## התקנה {#installation}

שלבים אלה ידריכו אותך בהתקנת Listmonk באמצעות Docker ו-Docker Compose ב-VPS שלך.

### 1. עדכן את השרת שלך {#1-update-your-server}

ודא שרשימת החבילות של המערכת שלך והחבילות המותקנות מעודכנות.

```bash
sudo apt update && sudo apt upgrade -y
```

### 2. התקנת תלויות {#2-install-dependencies}

התקן את Docker, Docker Compose ו-UFW (חומת אש לא מסובכת).

```bash
sudo apt install -y docker.io docker-compose ufw
```

### 3. הורד את תצורת Listmonk {#3-download-listmonk-configuration}

צור ספרייה עבור Listmonk והורד את הקובץ הרשמי `docker-compose.yml`.

```bash
mkdir listmonk && cd listmonk
curl -Lo docker-compose.yml https://raw.githubusercontent.com/knadh/listmonk/master/docker-compose.yml
```

קובץ זה מגדיר את מיכל היישום Listmonk ואת מיכל מסד הנתונים PostgreSQL הנדרש שלו.

### 4. הגדרת חומת אש (UFW) {#4-configure-firewall-ufw}

אפשר תעבורה חיונית (SSH, HTTP, HTTPS) דרך חומת האש. אם ה-SSH שלך פועל על פורט לא סטנדרטי, התאם בהתאם.

```bash
sudo ufw allow ssh
sudo ufw allow http
sudo ufw allow https
sudo ufw enable
```

אשר את הפעלת חומת האש כאשר תתבקש לעשות זאת.

### 5. הגדרת גישת HTTPS {#5-configure-https-access}

הרצת Listmonk דרך HTTPS היא קריטית לאבטחה. יש לך שתי אפשרויות עיקריות:

#### אפשרות א': שימוש בפרוקסי של Cloudflare (מומלץ לפשטות) {#option-a-using-cloudflare-proxy-recommended-for-simplicity}

אם ה-DNS של הדומיין שלך מנוהל על ידי Cloudflare, תוכל למנף את תכונת ה-proxy שלהם ל-HTTPS קל.

1. **DNS נקודתי**: צור רשומת `A` ב-Cloudflare עבור תת-הדומיין שלך ב-Listmonk (לדוגמה, `listmonk.yourdomain.com`) המצביעה לכתובת ה-IP של ה-VPS שלך. ודא ש- **סטטוס ה-Proxy** מוגדר ל- **Proxied** (ענן כתום).

2. **שינוי Docker Compose**: ערוך את קובץ `docker-compose.yml` שהורדת:

```bash
   sed -i 's/9000:9000/80:9000/' docker-compose.yml
   ```
פעולה זו הופכת את Listmonk לנגיש באופן פנימי בפורט 80, שאותו Cloudflare יכול לאחר מכן לבצע proxy ולאבטח באמצעות HTTPS.

#### אפשרות ב': שימוש בפרוקסי הפוך (Nginx, Caddy וכו') {#option-b-using-a-reverse-proxy-nginx-caddy-etc}

לחלופין, ניתן להגדיר פרוקסי הפוך כמו Nginx או Caddy בשרת ה-VPS שלכם כדי לטפל בסיום HTTPS ובבקשות פרוקסי ל-Listmonk (פועל כברירת מחדל על פורט 9000).

* שמור את ברירת המחדל `ports: - "127.0.0.1:9000:9000"` ב-`docker-compose.yml` כדי להבטיח ש-Listmonk יהיה נגיש רק באופן מקומי.
* הגדר את ה-reverse proxy שבחרת להאזין בפורטים 80 ו-443, לטפל ברכישת אישורי SSL (למשל, דרך Let's Encrypt), ולהעביר תעבורה ל-`http://127.0.0.1:9000`.
* הגדרה מפורטת של reverse proxy חורגת מהיקף מדריך זה, אך מדריכים רבים זמינים באינטרנט.

### 6. הפעל את Listmonk {#6-start-listmonk}

נווט חזרה לתיקיית `listmonk` שלך (אם אינך שם כבר) והפעל את המכולות במצב מנותק.

```bash
cd ~/listmonk # Or the directory where you saved docker-compose.yml
docker compose up -d
```

Docker יוריד את התמונות הדרושות ויפעיל את יישום Listmonk ואת קונטיינרים של מסד הנתונים. זה עשוי לקחת דקה או שתיים בפעם הראשונה.

✅ **גישה ל-Listmonk**: כעת תוכל לגשת לממשק האינטרנט של Listmonk דרך הדומיין שהגדרת (לדוגמה, `https://listmonk.yourdomain.com`).

### 7. הגדרת העברת דוא"ל SMTP ב-Listmonk {#7-configure-forward-email-smtp-in-listmonk}

לאחר מכן, הגדר את Listmonk לשליחת דוא"ל באמצעות חשבון הדוא"ל הנכנס שלך.

1. **הפעל SMTP בהעברת דוא"ל**: ודא שיצרת פרטי SMTP בלוח המחוונים של חשבון העברת הדוא"ל שלך. פעל לפי [מדריך להעברת דוא"ל לשליחת דוא"ל עם דומיין מותאם אישית באמצעות SMTP](https://forwardemail.net/en/guides/send-email-with-custom-domain-smtp) אם עדיין לא עשית זאת.

2. **הגדר את Listmonk**: התחבר ללוח הניהול של Listmonk.

* נווט אל **הגדרות -> SMTP**.

* ל-Listmonk יש תמיכה מובנית בהעברת דוא"ל. בחר **העברת דוא"ל** מרשימת הספקים, או הזן ידנית את הפרטים הבאים:

| סְבִיבָה | עֵרֶך |
| :---------------- | :------------------------------------------------------------------------------------------------------------------ |
| **מְאָרֵחַ** | `smtp.forwardemail.net` |
| **נָמָל** | `465` |
| **פרוטוקול אימות** | `LOGIN` |
| **שם משתמש** | כתובת דוא"ל להעברת דוא"ל **שם משתמש SMTP** |
| **סִיסמָה** | דוא"ל העברה **סיסמת SMTP** |
| **TLS** | `SSL/TLS` |
| **מהאימייל** | כתובת `From` הרצויה (לדוגמה, `newsletter@yourdomain.com`). ודא שדומיין זה מוגדר תחת 'העברת דוא"ל'. |

* **חשוב**: יש להשתמש תמיד בפורט `465` יחד עם `SSL/TLS` עבור חיבורים מאובטחים עם העברת דוא"ל. אין להשתמש ב-STARTTLS (פורט 587).

* לחץ על **שמור**.
3. **שלח דוא"ל ניסיון**: השתמש בלחצן "שלח דוא"ל ניסיון" בדף הגדרות ה-SMTP. הזן כתובת נמען שאליה תוכל לגשת ולחץ על **שלח**. ודא שהדוא"ל הגיע לתיבת הדואר הנכנס של הנמען.

### 8. הגדרת עיבוד יציאה מדף {#8-configure-bounce-processing}

עיבוד הודעות דוא"ל שלא יכלו להימסר (למשל, עקב כתובות לא חוקיות). Forward Email מספק webhook כדי להודיע ל-Listmonk על הודעות דוא"ל שלא נמסרו.

#### הגדרת העברת דוא"ל {#forward-email-setup}

1. התחבר ל-[לוח בקרה להעברת דוא"ל](https://forwardemail.net/) שלך.
2. נווט אל **דומיינים**, בחר את הדומיין שבו אתה משתמש לשליחה ועבור לדף **הגדרות** שלו.
3. גלל מטה אל המקטע **כתובת URL של Webhook ניתור**.
4. הזן את כתובת ה-URL הבאה, והחלף את `<your_listmonk_domain>` בדומיין או בתת-הדומיין בפועל שבו ניתן לגשת למופע Listmonk שלך:
```sh
   https://<your_listmonk_domain>/webhooks/service/forwardemail
   ```
*דוגמה*: `https://listmonk.yourdomain.com/webhooks/service/forwardemail`
5. גלל מטה עוד יותר אל המקטע **מפתח אימות מטען חתימת Webhook**.
6. **העתק** את מפתח האימות שנוצר. תזדקק לו ב-Listmonk.
7. שמור את השינויים בהגדרות הדומיין שלך להעברת דוא"ל.

#### הגדרת Listmonk {#listmonk-setup}

1. בלוח הניהול של Listmonk, נווט אל **הגדרות -> יציאות דחיפה**.
2. הפעל **הפעל עיבוד יציאות דחיפה**.
3. הפעל **הפעל webhooks דחיפה**.
4. גלל מטה אל המקטע **ספקי Webhook**.
5. הפעל **העברת דוא"ל**.
6. הדבק את **מפתח אימות מטען חתימת Webhook** שהעתקת מלוח המחוונים של העברת דוא"ל לשדה **מפתח העברת דוא"ל**.
7. לחץ על **שמירה** בתחתית העמוד.
8. עיבוד יציאות דחיפה מוגדר כעת! כאשר העברת דוא"ל מזהה יציאה דחיפה עבור דוא"ל שנשלח על ידי Listmonk, הוא יודיע למופע Listmonk שלך דרך ה-webhook, ו-Listmonk יסמן את המנוי בהתאם.
9. השלם את השלבים שלהלן ב-[בּוֹחֵן](#testing) כדי לוודא שהכל פועל כראוי.

## בדיקות {#testing}

הנה סקירה מהירה של פונקציות הליבה של Listmonk:

### צור רשימת תפוצה {#create-a-mailing-list}

* עבור אל **רשימות** בסרגל הצד.
* לחץ על **רשימה חדשה**.
* מלא את הפרטים (שם, סוג: ציבורי/פרטי, תיאור, תגיות) ושמור.

### הוסף מנויים {#add-subscribers}

* נווטו אל המקטע **מנויים**.
* ניתן להוסיף מנויים:
* **ידנית**: לחצו על **מנוי חדש**.
* **ייבוא**: לחצו על **ייבוא מנויים** כדי להעלות קובץ CSV.
* **API**: השתמשו ב-API של Listmonk עבור תוספות פרוגרמטיות.
* הקצו מנויים לרשימה אחת או יותר במהלך היצירה או הייבוא.
* **שיטה מומלצת**: השתמשו בתהליך של הצטרפות כפולה. הגדר זאת תחת **הגדרות -> הצטרפות ומנויים**.

### צור ושלח קמפיין {#create-and-send-a-campaign}

* עבור אל **קמפיינים** -> **קמפיין חדש**.
* מלא את פרטי הקמפיין (שם, נושא, דוא"ל מאת, רשימה/ות לשליחה).
* בחר את סוג התוכן שלך (טקסט עשיר/HTML, טקסט רגיל, HTML גולמי).
* כתוב את תוכן הדוא"ל שלך. ניתן להשתמש במשתני תבנית כמו `{{ .Subscriber.Email }}` או `{{ .Subscriber.FirstName }}`.
* **שלח תמיד דוא"ל ניסיון קודם!** השתמש באפשרות "שלח ניסיון" כדי להציג תצוגה מקדימה של הדוא"ל בתיבת הדואר הנכנס שלך.
* לאחר שתהיה מרוצה, לחץ על **התחל קמפיין** כדי לשלוח אותו באופן מיידי או לתזמן אותו למועד מאוחר יותר.

## אימות {#verification}

* **משלוח SMTP**: שלח באופן קבוע הודעות דוא"ל לניסיון דרך דף הגדרות ה-SMTP של Listmonk ובדוק קמפיינים כדי לוודא שההודעות נמסרות כראוי.
* **טיפול ביציאה מהמחשב**: שלח קמפיין ניסיון לכתובת דוא"ל ידועה כלא חוקית (לדוגמה, `bounce-test@yourdomain.com` אם אין לך כתובת אמיתית בהישג יד, אם כי התוצאות עשויות להשתנות). בדוק את סטטיסטיקות הקמפיין ב-Listmonk לאחר זמן קצר כדי לראות אם היציאה מהמחשב נרשמה.
* **כותרות דוא"ל**: השתמש בכלים כמו [בודק דואר](https://www.mail-tester.com/) או בדוק את כותרות הדוא"ל באופן ידני כדי לוודא ש-SPF, DKIM ו-DMARC עוברים, דבר המצביע על הגדרה תקינה באמצעות העברת דוא"ל.
* **יומני העברת דוא"ל**: בדוק את יומני לוח המחוונים של העברת דוא"ל אם אתה חושד שבעיות מסירה שמקורן בשרת ה-SMTP.

## הערות למפתחים {#developer-notes}

* **יצירת תבניות**: Listmonk משתמש במנוע התבניות של Go. עיינו בתיעוד שלו להתאמה אישית מתקדמת: `{{ .Subscriber.Attribs.your_custom_field }}`.
* **API**: Listmonk מספק ממשק API REST מקיף לניהול רשימות, מנויים, קמפיינים, תבניות ועוד. מצאו את קישור תיעוד ה-API בתחתית הכותרת של מופע Listmonk שלכם.
* **שדות מותאמים אישית**: הגדר שדות מנויים מותאמים אישית תחת **הגדרות -> שדות מנויים** כדי לאחסן נתונים נוספים.
* **Webhooks**: מלבד יציאות חוזרות, Listmonk יכול לשלוח webhooks עבור אירועים אחרים (למשל, מנויים), מה שמאפשר אינטגרציה עם מערכות אחרות.

## מסקנה {#conclusion}

על ידי שילוב העוצמה של Listmonk המאוחסנת בעצמה עם המסירה המאובטחת והמכבדת את הפרטיות של Forward Email, אתם יוצרים פלטפורמת שיווק בדוא"ל חזקה ואתית. אתם שומרים על בעלות מלאה על נתוני הקהל שלכם תוך כדי שאתם נהנים מיכולת מסירה גבוהה ותכונות אבטחה אוטומטיות.

הגדרה זו מספקת אלטרנטיבה ניתנת להרחבה, חסכונית וידידותית למפתחים לשירותי דוא"ל קנייניים, ותואמת באופן מושלם את האתוס של תוכנה בקוד פתוח ופרטיות המשתמש.

שליחה מהנה! 🚀